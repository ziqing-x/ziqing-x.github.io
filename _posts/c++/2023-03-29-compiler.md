---
title: 记录一次c++编译选项-Os导致程序段错误
tags: [编译参数]
category: c++
date: 2023-03-29 16:00:00 +0800
---

编译c++代码时，常常会加如一些编译参数，这些参数有的会删除冗余、缩小代码体积、消除缓存抖动、提升性能等，但应当谨慎使用。

有这么一个场景，程序A依赖动态库B和C，而动态库B和C都使用到了同一个第三方的静态库或者源码，当使用-Os选项进行代码优化时，如果B和C使用的这个第三方库版本相同一般不会出什么问题，如果版本不同，就有可能会产生不符合预期的优化结果从而导致程序崩溃，所以使用-Os需谨慎。